<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poortjie Services</title>
    <meta name="author" content="Musa Mgijima">
    <meta name="description"
          content="Poortjie Services connects you with local Kasi services: From school transport and tow trucks to professional designers and web developers.">
    <meta name="keywords"
          content="Poortjie, Kasi services, transport, school transport, graphic design, web development, South Africa">
    <meta name="copyright" content="¬© 2026 Poortjie Services. All rights reserved.">
    <meta name="robots" content="index,follow">
    <meta name="theme-color" content="#22c55e">

    <link rel="icon" href="favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png">
    <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body class="font-sans antialiased bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100">

<div class="fixed top-5 left-5 z-50" id="chat-control">
    <a href="chats.html" id="chat-icon-btn"
       class="p-3 rounded-full bg-green-600 text-white shadow-lg hover:bg-green-700 transition flex items-center justify-center"
       title="Chats">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
        </svg>
    </a>
</div>

<div class="fixed top-5 right-5 z-50 flex gap-3" id="user-controls">
    <!-- Theme Toggle removed from here and moved to hamburger menu -->

    <div id="hamburger-menu" class="relative">
        <button id="hamburger-btn"
                class="p-3 rounded-full bg-green-600 text-white shadow-lg hover:bg-green-700 transition">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>
        <div id="menu-items"
             class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5">
            <button id="menu-theme-toggle"
                    class="w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700 flex items-center gap-3">
                <span id="menu-theme-icon">üåì</span> Mode
            </button>
            <a id="admin-link" href="manage/business.html"
               class="hidden block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700">Business
                Admin</a>
            <a id="home-admin-link" href="manage/home-manager.html"
               class="hidden block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700">Home
                Manager</a>
            <a id="news-admin-link" href="manage/news-writer.html"
               class="hidden block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700">Post
                News/Alert</a>
            <a id="taxi-admin-link" href="manage/taxi rank.html"
               class="hidden block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700">Taxi
                Rank Admin</a>

            <a href="support.html"
               class="block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700">Support</a>

            <a id="add-business-link" href="services/business-form.html"
               class="hidden block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700">Add
                Your Business</a>

            <a id="profile-link" href="authentication/profile.html"
               class="hidden block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700">Profile</a>
            <div id="auth-divider" class="hidden border-t border-gray-100 dark:border-slate-700 my-1"></div>
            <a id="login-link" href="authentication/login.html"
               class="hidden block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700">Login</a>
            <button id="logout-btn"
                    class="hidden w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-700">
                Logout
            </button>
        </div>
    </div>
</div>

<header class="max-w-6xl mx-auto pt-24 pb-16 px-6 text-center">
    <div class="mb-4 flex justify-center">
        <div class="bg-green-500 text-white px-4 py-1 rounded-full text-sm font-bold tracking-widest uppercase">
            services
        </div>
    </div>
    <h1 class="text-6xl font-extrabold mb-4 tracking-tight">Poortjie</h1>
    <div id="alert-container" class="max-w-2xl mx-auto mb-4 hidden">
        <!-- Alerts will be injected here -->
    </div>
    <div id="news-slider-container" class="max-w-2xl mx-auto mb-8 hidden">
        <div id="news-slider"
             class="bg-green-50 dark:bg-slate-800/50 border border-green-100 dark:border-slate-700 rounded-2xl p-6 relative group overflow-hidden">
            <div id="news-content-area" class="transition-opacity duration-500">
                <!-- News content will be injected here -->
                <div class="animate-pulse flex flex-col items-center">
                    <div class="h-4 bg-gray-200 dark:bg-slate-700 rounded w-3/4 mb-2"></div>
                    <div class="h-3 bg-gray-200 dark:bg-slate-700 rounded w-1/2"></div>
                </div>
            </div>

            <!-- Navigation Arrows -->
            <button id="prev-news" class="absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-white/20 hover:bg-white/40 dark:bg-slate-900/20 dark:hover:bg-slate-900/40 md:opacity-0 group-hover:opacity-100 transition-opacity duration-300 focus:outline-none" aria-label="Previous news">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
            </button>
            <button id="next-news" class="absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-white/20 hover:bg-white/40 dark:bg-slate-900/20 dark:hover:bg-slate-900/40 md:opacity-0 group-hover:opacity-100 transition-opacity duration-300 focus:outline-none" aria-label="Next news">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </button>

            <div class="flex justify-center gap-2 mt-4" id="slider-dots"></div>
        </div>
    </div>
    <p id="hero-static-text" class="text-xl opacity-80 max-w-2xl mx-auto leading-relaxed">
        The digital heartbeat of the township. Access reliable transport, professional designers, and expert
        developers‚Äîall in one place.
    </p>

    <div class="flex flex-wrap justify-center gap-4 mt-8">
        <a href="#services"
           class="px-8 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition shadow-md">Explore
            Services</a>
        <a href="services/taxi%20rank.html"
           class="px-8 py-3 border-2 border-green-600 text-green-600 dark:text-green-400 font-bold rounded-lg hover:bg-green-600 hover:text-white transition">Taxi
            Rank Info</a>
    </div>
</header>

<main class="max-w-6xl mx-auto px-6 pb-24" id="services">

    <div class="mb-12 flex flex-col md:flex-row gap-4">
        <div class="relative flex-grow">
            <svg class="w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" fill="none"
                 stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <label for="search-bar"></label><input type="text" id="search-bar" placeholder="Search categories..."
                                                   class="w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 bg-white dark:bg-slate-800 dark:border-slate-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>
        <label for="sort-list"></label><select id="sort-list"
                                               class="px-4 py-3 rounded-lg border border-gray-300 bg-white dark:bg-slate-800 dark:border-slate-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-green-500">
        <option value="asc">Name (A-Z)</option>
        <option value="desc">Name (Z-A)</option>
    </select>
    </div>

    <div id="services-grid" class="grid md:grid-cols-3 gap-8">
    </div>

    <section class="mt-24 card p-10 rounded-3xl bg-gradient-to-br from-green-50 to-transparent dark:from-green-900/10">
        <div class="max-w-3xl">
            <h2 class="text-3xl font-bold mb-4">Built for the community, by the community.</h2>
            <p class="text-lg opacity-80 mb-6">
                Poortjie Services is all about lifting our local businesses. We make sure every hustle in the hood has a professional home online, without any of the complicated talk or heavy costs.
            </p>
            <div class="flex gap-4">
                <span class="text-[10px] font-bold px-2 py-1 border border-green-500/30 rounded text-green-500 uppercase tracking-widest">Mobile First</span>
                <span class="text-[10px] font-bold px-2 py-1 border border-green-500/30 rounded text-green-500 uppercase tracking-widest">Kasi Focused</span>
            </div>
        </div>
    </section>

</main>

<footer class="text-center py-12 border-t border-gray-100 dark:border-slate-800 opacity-50 text-xs">
    &copy; 2026 <a href="index.html" onclick="window.top.location.replace('index.html'); return false;"
                   class="hover:underline">Poortjie Services</a>. Empowering poortjie economies.
</footer>

<script src="scripts/theme.js"></script>
<script src="https://unpkg.com/dexie/dist/dexie.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="scripts/firebase.js"></script>

<script>
    let allServices = [];

    function renderCards(servicesData) {
        if (!servicesData) return;
        const grid = document.getElementById('services-grid');
        grid.innerHTML = servicesData.map(service => `
            <section class="space-y-6">
                <h2 class="text-2xl font-bold flex items-center gap-3">
                    <span class="w-8 h-1 bg-green-500"></span> ${service.category}
                </h2>
                <div class="card flex flex-col p-6 rounded-2xl border-l-4 border-l-green-500">
                    <div class="flex-grow">
                        <h3 class="text-xl font-bold mb-2">${service.title}</h3>
                        <p class="text-sm opacity-70 mb-4">${service.description}</p>
                        <ul class="space-y-2 text-sm font-medium">
                            ${service.list.map(item => `<li class="flex items-center gap-2">${item}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="mt-6 flex flex-col gap-2">
                        <a href="${service.url}" class="block text-center py-2 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 transition">${service.btnText}</a>
                        ${service.extraBtn ? `<a href="${service.extraBtn.url}" onclick="window.top.location.replace('${service.extraBtn.url}'); return false;" class="block text-center py-2 border-2 border-green-600 text-green-600 dark:text-green-400 rounded-lg font-bold hover:bg-green-600 hover:text-white transition">${service.extraBtn.text}</a>` : ''}
                    </div>
                </div>
            </section>
        `).join('');
    }

    function filterAndSort() {
        const searchTerm = document.getElementById('search-bar').value.toLowerCase();
        const sortValue = document.getElementById('sort-list').value;

        let filtered = allServices.filter(service =>
            service.category.toLowerCase().includes(searchTerm) ||
            service.title.toLowerCase().includes(searchTerm) ||
            service.description.toLowerCase().includes(searchTerm) ||
            service.list.some(item => item.toLowerCase().includes(searchTerm))
        );

        if (sortValue === 'asc') {
            filtered.sort((a, b) => a.category.localeCompare(b.category));
        } else if (sortValue === 'desc') {
            filtered.sort((a, b) => b.category.localeCompare(a.category));
        }

        renderCards(filtered);
    }

    function fetchAndRenderServices() {
        // 1. Try to load from cache first for instant UI
        try {
            const cachedServices = sessionStorage.getItem('servicesCache');
            if (cachedServices) {
                allServices = JSON.parse(cachedServices);
                filterAndSort();
            }
        } catch (e) {
            console.error("Could not read from sessionStorage:", e);
        }

        // 2. Fetch from Firestore to get the latest data
        const servicesDocRef = firebase.firestore().collection('poortjie').doc('services');
        servicesDocRef.get().then((doc) => {
            if (doc.exists) {
                const homeScreenData = doc.data().homeScreen;
                if (homeScreenData && typeof homeScreenData === 'object') {
                    allServices = Object.keys(homeScreenData)
                        .filter(key => homeScreenData[key].status !== 'inactive' && homeScreenData[key].status !== 'disabled')
                        .map(key => {
                            const service = homeScreenData[key];
                            return {
                                category: key,
                                title: service.subtitle,
                                description: service.description,
                                list: service.listing || [],
                                url: `services/${key.toLowerCase()}.html`,
                                target: '_top',
                                btnText: `Explore ${key}`
                            };
                        });

                    filterAndSort();
                    try {
                        sessionStorage.setItem('servicesCache', JSON.stringify(allServices));
                    } catch (e) {
                        console.error("Could not write to sessionStorage:", e);
                    }

                } else {
                    console.log("'homeScreen' data not found or is not an object.");
                    allServices = [];
                    filterAndSort();
                }
            } else {
                console.log("No 'services' document found!");
                allServices = [];
                filterAndSort();
            }
        }).catch((error) => {
            console.error("Error fetching services:", error);
            // Don't clear the grid if there's a network error, stale cache is better than nothing
        });
    }

    window.onload = () => {
        // --- News Slider Logic ---
        let newsUpdates = [];
        let alertUpdates = [];
        let currentNewsIndex = 0;
        let sliderInterval;

        function startNewsSlider() {
            if (newsUpdates.length === 0 && alertUpdates.length === 0) {
                document.getElementById('news-slider-container').classList.add('hidden');
                document.getElementById('alert-container').classList.add('hidden');
                document.getElementById('hero-static-text').classList.remove('hidden');
                return;
            }

            document.getElementById('hero-static-text').classList.add('hidden');

            if (alertUpdates.length > 0) {
                renderAlerts();
            } else {
                document.getElementById('alert-container').classList.add('hidden');
            }

            if (newsUpdates.length > 0) {
                document.getElementById('news-slider-container').classList.remove('hidden');
                renderNewsSlide();
                if (newsUpdates.length > 1) {
                    resetSliderTimer();
                }
            } else {
                document.getElementById('news-slider-container').classList.add('hidden');
            }
        }

        function renderAlerts() {
            const container = document.getElementById('alert-container');
            container.innerHTML = alertUpdates.map(alert => `
                <div class="bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-2xl p-4 flex items-start gap-4 text-left animate-bounce-subtle mb-2">
                    <div class="bg-red-500 text-white p-2 rounded-full flex-shrink-0 mt-1">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                    </div>
                    <div>
                        <h3 class="font-black text-red-900 dark:text-red-400 uppercase text-xs tracking-wider">Emergency Alert</h3>
                        <h2 class="text-lg font-bold text-slate-900 dark:text-white">${alert.title}</h2>
                        <p class="text-sm opacity-80 leading-tight mt-1">${alert.content}</p>
                    </div>
                </div>
            `).join('');
            container.classList.remove('hidden');
        }

        const newsSlider = document.getElementById('news-slider');
        newsSlider.addEventListener('mouseenter', () => {
            if (newsUpdates.length > 1) {
                clearInterval(sliderInterval);
            }
        });

        newsSlider.addEventListener('mouseleave', () => {
            if (newsUpdates.length > 1) {
                resetSliderTimer();
            }
        });

        function resetSliderTimer() {
            clearInterval(sliderInterval);
            sliderInterval = setInterval(() => {
                showNextNews();
            }, 6000);
        }

        function showNextNews() {
            currentNewsIndex = (currentNewsIndex + 1) % newsUpdates.length;
            renderNewsSlide();
        }

        function showPrevNews() {
            currentNewsIndex = (currentNewsIndex - 1 + newsUpdates.length) % newsUpdates.length;
            renderNewsSlide();
        }

        document.getElementById('next-news').addEventListener('click', () => {
            showNextNews();
            resetSliderTimer();
        });

        document.getElementById('prev-news').addEventListener('click', () => {
            showPrevNews();
            resetSliderTimer();
        });

        function renderNewsSlide() {
            const news = newsUpdates[currentNewsIndex];
            const contentArea = document.getElementById('news-content-area');
            const dotsArea = document.getElementById('slider-dots');

            contentArea.style.opacity = '0';

            setTimeout(() => {
                let typeLabel = '';
                let typeColor = 'bg-green-500';

                if (news.type === 'event') {
                    typeLabel = 'üìÖ EVENT';
                    typeColor = 'bg-blue-500';
                } else if (news.type === 'promo') {
                    typeLabel = 'üéÅ PROMO';
                    typeColor = 'bg-purple-500';
                }

                contentArea.innerHTML = `
                    <div class="flex flex-col items-center">
                        ${typeLabel ? `<span class="${typeColor} text-[10px] text-white font-black px-2 py-0.5 rounded mb-2">${typeLabel}</span>` : ''}
                        <h2 class="text-2xl md:text-3xl font-black mb-2 text-center text-slate-900 dark:text-white leading-tight">${news.title}</h2>
                        <p class="text-lg opacity-80 text-center max-w-lg leading-relaxed">${news.content}</p>
                    </div>
                `;
                contentArea.style.opacity = '1';

                // Render Dots
                if (newsUpdates.length > 1) {
                    dotsArea.innerHTML = newsUpdates.map((_, i) => `
                        <div onclick="goToNews(${i})" class="cursor-pointer w-1.5 h-1.5 rounded-full transition-all duration-300 ${i === currentNewsIndex ? 'bg-green-600 w-4' : 'bg-gray-300 dark:bg-slate-600'}"></div>
                    `).join('');
                } else {
                    dotsArea.innerHTML = '';
                }
            }, 300);
        }

        window.goToNews = (index) => {
            currentNewsIndex = index;
            renderNewsSlide();
            resetSliderTimer();
        };

        function fetchNews() {
            const now = new Date();
            // We use onSnapshot for real-time updates.
            // Note: If this query fails in the console, you might need to create a Firestore index.
            db.collection('poortjie').doc('news').collection('updates')
                .where('status', '==', 'active')
                .onSnapshot(snapshot => {
                    newsUpdates = [];
                    alertUpdates = [];
                    snapshot.forEach(doc => {
                        const data = doc.data();
                        // Client-side expiry and showFrom check
                        const isExpired = data.expiry && data.expiry.toDate() < now;
                        const isFuture = data.showFrom && data.showFrom.toDate() > now;
                        if (!isExpired && !isFuture) {
                            if (data.type === 'alert') {
                                alertUpdates.push({id: doc.id, ...data});
                            } else {
                                newsUpdates.push({id: doc.id, ...data});
                            }
                        }
                    });

                    // Client-side sort as fallback for missing composite index
                    const sortFn = (a, b) => {
                        const dateA = a.createdAt?.toDate() || new Date(0);
                        const dateB = b.createdAt?.toDate() || new Date(0);
                        return dateB - dateA;
                    };

                    newsUpdates.sort(sortFn);
                    alertUpdates.sort(sortFn);

                    // Limit news to 5 most recent
                    newsUpdates = newsUpdates.slice(0, 5);
                    // Limit alerts to 2 most recent
                    alertUpdates = alertUpdates.slice(0, 2);

                    startNewsSlider();
                }, error => {
                    console.error("Error fetching news:", error);
                    // If it's an index error, Firestore provides a link in the console
                    if (error.message && error.message.includes('index')) {
                        console.warn("Firestore Index Required: " + error.message);
                    }
                    document.getElementById('news-slider-container').classList.add('hidden');
                    document.getElementById('hero-static-text').classList.remove('hidden');
                });
        }

        fetchAndRenderServices();
        fetchNews();

        document.getElementById('search-bar').addEventListener('input', filterAndSort);
        document.getElementById('sort-list').addEventListener('change', filterAndSort);

        // AUTH & UI SCRIPTS
        const hamburgerMenu = document.getElementById('hamburger-menu');
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const menuItems = document.getElementById('menu-items');
        const profileLink = document.getElementById('profile-link');
        const adminLink = document.getElementById('admin-link');
        const homeAdminLink = document.getElementById('home-admin-link');
        const taxiAdminLink = document.getElementById('taxi-admin-link');
        const addBusinessLink = document.getElementById('add-business-link');
        const newsAdminLink = document.getElementById('news-admin-link');
        const authDivider = document.getElementById('auth-divider');
        const loginLink = document.getElementById('login-link');
        const logoutBtn = document.getElementById('logout-btn');

        hamburgerBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            menuItems.classList.toggle('hidden');
        });

        firebase.auth().onAuthStateChanged(user => {
            authDivider.classList.remove('hidden');
            if (user) {
                addBusinessLink.classList.remove('hidden');
                profileLink.classList.remove('hidden');
                loginLink.classList.add('hidden');
                logoutBtn.classList.add('hidden'); // Replaced by profile
                firebase.firestore().collection('users').doc(user.uid).get().then((doc) => {
                    if (doc.exists) {
                        const userData = doc.data();
                        if (userData.displayName) {
                            profileLink.textContent = userData.displayName;
                        }
                        if (userData.photoUrl) {
                            // Optionally show user avatar in the menu
                            const existingImg = profileLink.querySelector('img');
                            if (existingImg) {
                                existingImg.src = userData.photoUrl;
                            } else {
                                profileLink.innerHTML = `<img src="${userData.photoUrl}" class="w-6 h-6 rounded-full inline-block mr-2 object-cover" alt=""> ${userData.displayName || 'Profile'}`;
                            }
                        }
                        const isSuperUser = userData.roles?.digilayn?.isSuperUser === true;
                        const isPoortjieAdmin = userData.roles?.poortjie?.isAdmin === true;
                        const isTaxiRankAdmin = userData.roles?.poortjie?.isTaxiRankAdmin === true;

                        if (isSuperUser || isPoortjieAdmin) {
                            adminLink.classList.remove('hidden');
                            newsAdminLink.classList.remove('hidden');
                        }
                        if (isSuperUser) {
                            homeAdminLink.classList.remove('hidden');
                        }
                        if (isSuperUser || isTaxiRankAdmin) {
                            taxiAdminLink.classList.remove('hidden');
                        }
                    }
                });
            } else {
                profileLink.classList.add('hidden'); // Logout replaced by Profile, so Profile is only for logged in
                profileLink.innerHTML = 'Profile'; // Reset content
                loginLink.classList.remove('hidden');
                adminLink.classList.add('hidden');
                homeAdminLink.classList.add('hidden');
                taxiAdminLink.classList.add('hidden');
                addBusinessLink.classList.add('hidden');
                newsAdminLink.classList.add('hidden');
                logoutBtn.classList.add('hidden');
            }
        });

        logoutBtn.addEventListener('click', () => {
            firebase.auth().signOut();
        });

        window.onclick = (e) => {
            if (hamburgerMenu && !hamburgerMenu.contains(e.target)) menuItems.classList.add('hidden');
        };
    };

    console.log("website developed by Musa Mgijima");
</script>
</body>
</html>
